{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTempplate = imgInfo => {\n  //console.log(imgInfo);\n  return `<li class=\"gallery-card\">\n  <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-item\">\n  <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/>\n  </a>\n  <ul class=\"text-list\">\n               <li class=\"text-item\">\n                        <h2 class=\"text-title\">Likes:</h2>\n                        <p class=\"text-values\">${imgInfo.likes}</p>\n                    </li>\n                    <li class=\"text-item\">\n                        <h2 class=\"text-title\">Views:</h2>\n                        <p class=\"text-values\">${imgInfo.views}</p>\n                    </li>\n                    <li class=\"text-item\">\n                        <h2 class=\"text-title\">Comments:</h2>\n                        <p class=\"text-values\">${imgInfo.comments}</p>\n                    </li>\n                    <li class=\"text-item\">\n                        <h2 class=\"text-title\">Downloads:</h2>\n                        <p class=\"text-values\">${imgInfo.downloads}</p>\n                    </li>\n       \n          </ul>\n  \n  </li>\n  `;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n  const axiosOtions = {\n    params: {\n      key: '48247224-415eb498da8da81883dddb739',\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOtions);\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { createGalleryCardTempplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loaderEl2 = document.querySelector('.js-loader-2');\nconst loadMoreButtonEl = document.querySelector('.load-more-btn');\n\nlet page = 1;\nlet searchedQuery = '';\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animationSpeed: 250,\n});\n//-------Submit-------------------------------------------\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchedQuery === '') {\n      iziToast.error({\n        position: 'topRight',\n        message: 'Field must be filled in!',\n      });\n      return;\n    }\n\n    page = 1;\n    loadMoreButtonEl.classList.add('is-hidden');\n\n    galleryEl.innerHTML = '';\n\n    loaderEl.classList.remove('is-hidden');\n\n    searchFormEl.reset();\n\n    const response = await fetchPhotosByQuery(searchedQuery, page);\n    if (response.data.total === 0) {\n      galleryEl.innerHTML = '';\n      loaderEl.classList.add('is-hidden');\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    if (response.data.totalHits > 1) {\n      loadMoreButtonEl.classList.remove('is-hidden');\n      loadMoreButtonEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n    const galleryTemplate = response.data.hits\n      .map(el => createGalleryCardTempplate(el))\n      .join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n\n    lightbox.refresh();\n    loaderEl.classList.add('is-hidden');\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: 'BAD REQUEST',\n      position: 'topRight',\n    });\n    console.log(err);\n    loaderEl.classList.add('is-hidden');\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n//----------------Load-more----------------------------\nconst onLoadMoreBtnClick = async () => {\n  try {\n    loaderEl2.classList.remove('is-hidden');\n    page++;\n    const response = await fetchPhotosByQuery(searchedQuery, page);\n\n    const galleryTemplate = response.data.hits\n      .map(el => createGalleryCardTempplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    if (page === response.data.totalHits) {\n      loadMoreButtonEl.classList.add('is-hidden');\n      loadMoreButtonEl.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    lightbox.refresh();\n\n    loaderEl2.classList.add('is-hidden');\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: 'BAD REQUEST',\n      position: 'topRight',\n    });\n    console.log(err);\n    loaderEl2.classList.add('is-hidden');\n  }\n};\n"],"names":["createGalleryCardTempplate","imgInfo","fetchPhotosByQuery","searchedQuery","currentPage","axiosOtions","axios","searchFormEl","galleryEl","loaderEl","loaderEl2","loadMoreButtonEl","page","lightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","response","onLoadMoreBtnClick","galleryTemplate","el","err"],"mappings":"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"}